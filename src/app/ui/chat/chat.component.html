<nb-layout>
    <nb-layout-column>
        <button ngClass="chatButton" [nbPopover]="templateRef">
            <nb-icon icon="message-square-outline" status="control"></nb-icon>
        </button>
        <ng-template #templateRef>
            <nb-chat title="Race Chat AI " size="large">
                <nb-chat-message *ngFor="let msg of messages" [type]="msg.type" [message]="msg.text" [reply]="msg.reply"
                    [sender]="msg.user.name" [date]="msg.date" [files]="msg.files" [quote]="msg.quote"
                    [latitude]="msg.latitude" [longitude]="msg.longitude" [avatar]="msg.user.avatar">
                </nb-chat-message>
                <nb-chat-form (send)="sendMessage($event)" [dropFiles]="true">
                </nb-chat-form>
            </nb-chat>
        </ng-template>
    </nb-layout-column>
</nb-layout>